<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
	<head>
		<title>map</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<style type="text/css" media="screen">
		html, body { height:100%; background-color: #ffffff;}
		body { margin:0; padding:0; overflow:hidden; }
		#flashContent { width:100%; height:100%; }
		</style>
		
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
		<script src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js" type="text/javascript"></script>
		<script type="text/javascript">
		
      // function getFlashMovie(movieName) { 
      //   var isIE = navigator.appName.indexOf("Microsoft") != -1;
      //   return (isIE) ? window[movieName] : document[movieName];
      // }
      // function sendToFlash(dataString) {
      //   //alert("sending to flash " + dataString);
      //   getFlashMovie("map").sendTextToFlash(dataString);
      // }
    	
    	var state = "";
    	var curID = "85";
    	
    	function setState(st){
    	  state = st;
    	  sendToGraph("corporate/age/" + curID + state);
    	}
    	
    	function sendToMap(dataString) {
        thisMovie("map").sendTextToFlash(dataString);
      }
      
      function sendToGraph(dataString) {
        thisMovie("graph").sendTextToFlash(dataString);
        //alert("sending to graph " + dataString);
      }
    	
    	$(document).ready(function(){
    	  function getFlashMovie(movieName) { 
          var isIE = navigator.appName.indexOf("Microsoft") != -1;
          return (isIE) ? window[movieName] : document[movieName];
        }
    	  
    	  //alert("ready!");
    	  $("a.dataset").click(function(){
    	    curID = $(this).attr("href");
    	    
    	    //send to the map
    	    sendToMap("corporate/map/" + $(this).attr("href") + "/");
    	    
    	    //send to the graph
    	    sendToGraph("corporate/age/" + $(this).attr("href") + "/" + state);
    	    
    	    return false;
    	  });
    	});

      function thisMovie(movieName) {
        if (navigator.appName.indexOf("Microsoft") != -1) {
          return window[movieName];
        } else {
          return document[movieName];
        }
      }
    	
    	var flashvars = {
    	  xmlpath:"corporate/map/" + curID + "/",
    	  baseURL:"http://www.directeddata.com/services/website/"
    	};
    	
    	var mapvars = {
    	  xmlpath:"corporate/map/" + curID + "/",
    	  baseURL:"http://www.directeddata.com/services/website/"
    	};
    	
    	var agevars = {
    	  xmlpath:"corporate/age/" + curID + "/",
    	  baseURL:"http://www.directeddata.com/services/website/"
    	};
    	
      var params = {
          menu: "false",
          wmode: "transparent"
      };
      var attributes = {
        allowfullscreen: "true",
        allowscriptaccess: "always"
      };
    
      swfobject.embedSWF("map.swf", "map", "450", "350","10.0.0", params, mapvars, attributes);
      swfobject.embedSWF("bar-graph.swf", "graph", "750", "350","10.0.0", params, agevars, attributes);
    	
    </script> 
		
	</head>
	<body>
	  
	  <a class="dataset" rel="nofollow" href="85">View 85</a>
	  <a class="dataset" rel="nofollow" href="86">View 86</a>
	  <a class="dataset" rel="nofollow" href="87">View 87</a>
	  <a class="dataset" rel="nofollow" href="88">View 88</a>
	  <a class="dataset" rel="nofollow" href="89">View 89</a>
	  <a class="dataset" rel="nofollow" href="90">View 90</a>
	  <br />
	  <br />
	  <br />
		<div id="map"></div>
		<div id="graph"></div>
	</body>
</html>
